function showImgModal(img){var len=$("img[modal='zoomImg']").length;var arrPic=new Array();
for(var i=0;i<len;i++){arrPic[i]=$("img[modal='zoomImg']").eq(i).prop("src")}$("body").append('<div class="mask-layer">   <div class="mask-layer-black"></div>   <div class="mask-layer-container">       <div class="mask-layer-container-operate">           <button class="mask-prev btn-default-styles" style="float: left">上一张</button>           <button class="mask-out btn-default-styles">放大</button>           <button class="mask-in btn-default-styles">缩小</button>           <button class="mask-clockwise btn-default-styles">顺旋转</button>           <button class="mask-counterclockwise btn-default-styles">逆旋转</button>           <button class="mask-close btn-default-styles">关闭</button>           <button class="mask-next btn-default-styles" style="float: right">下一张</button>       </div>       <div class="mask-layer-imgbox auto-img-center"></div>   </div></div>');
var img_index=$("img[modal='zoomImg']").index(img);var num=img_index;function showImg(){$(".mask-layer-imgbox").append('<p><img src="" alt=""></p>');
$(".mask-layer-imgbox img").prop("src",arrPic[num]);var box_width=$(".auto-img-center").width();
var box_height=$(".auto-img-center").height();var initial_width=$(".auto-img-center img").width();
var initial_height=$(".auto-img-center img").height();if(initial_width>initial_height){$(".auto-img-center img").css("width",box_width);
var last_imgHeight=$(".auto-img-center img").height();$(".auto-img-center img").css("margin-top",-(last_imgHeight-box_height)/2)
}else{$(".auto-img-center img").css("height",box_height);var last_imgWidth=$(".auto-img-center img").width();
$(".auto-img-center img").css("margin-left",-(last_imgWidth-box_width)/2)}var $div_img=$(".mask-layer-imgbox p");
$div_img.bind("mousedown",function(event){event.preventDefault&&event.preventDefault();
var offset_x=$(img)[0].offsetLeft;var offset_y=$(img)[0].offsetTop;var mouse_x=event.pageX;
var mouse_y=event.pageY;$(".mask-layer-imgbox").bind("mousemove",function(ev){var _x=ev.pageX-mouse_x;
var _y=ev.pageY-mouse_y;var now_x=(offset_x+_x)+"px";var now_y=(offset_y+_y)+"px";
$div_img.css({top:now_y,left:now_x})})});$div_img.bind("mouseup",function(){$(".mask-layer-imgbox").unbind("mousemove")
});var zoom_n=1;$(".mask-out").click(function(){zoom_n+=0.1;$(".mask-layer-imgbox img").css({transform:"scale("+zoom_n+")","-moz-transform":"scale("+zoom_n+")","-ms-transform":"scale("+zoom_n+")","-o-transform":"scale("+zoom_n+")","-webkit-transform":"scale("+zoom_n+")"})
});$(".mask-in").click(function(){zoom_n-=0.1;zoom_n=zoom_n<=0.1?0.1:zoom_n;$(".mask-layer-imgbox img").css({transform:"scale("+zoom_n+")","-moz-transform":"scale("+zoom_n+")","-ms-transform":"scale("+zoom_n+")","-o-transform":"scale("+zoom_n+")","-webkit-transform":"scale("+zoom_n+")"})
});var spin_n=0;$(".mask-clockwise").click(function(){spin_n+=15;$(".mask-layer-imgbox img").parent("p").css({transform:"rotate("+spin_n+"deg)","-moz-transform":"rotate("+spin_n+"deg)","-ms-transform":"rotate("+spin_n+"deg)","-o-transform":"rotate("+spin_n+"deg)","-webkit-transform":"rotate("+spin_n+"deg)"})
});$(".mask-counterclockwise").click(function(){spin_n-=15;$(".mask-layer-imgbox img").parent("p").css({transform:"rotate("+spin_n+"deg)","-moz-transform":"rotate("+spin_n+"deg)","-ms-transform":"rotate("+spin_n+"deg)","-o-transform":"rotate("+spin_n+"deg)","-webkit-transform":"rotate("+spin_n+"deg)"})
});$(".mask-close").click(function(){$(".mask-layer").remove()});$(".mask-layer-black").click(function(){$(".mask-layer").remove()
})}showImg();$(".mask-next").on("click",function(){$(".mask-layer-imgbox p img").remove();
num++;if(num==len){num=0}showImg()});$(".mask-prev").on("click",function(){$(".mask-layer-imgbox p img").remove();
num--;if(num==-1){num=len-1}showImg()})};